<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nhận file</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.3.1/peerjs.min.js"
        integrity="sha512-wNUAk/IKoDcVSiKiN/0ormRTzENc9IbFdHa/BWNuLPtp2kG53TLf5dobOeCHoeafnlaSfjKAiSewS6AJspm/Iw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    Nhận file<br>
    <h3>Nhập ID phòng:</h3>
    <input type="text" placeholder="ID phòng" id="id">
    <input type="button" value="Kết nối" onclick="ketnoi()">
    <br>
    <br>
    <a id="taive"></a>
</body>

<script>
    var peer = new Peer();
    function ketnoi() {
        // Kết nối
        var id = "ekRSeVBkOWt1c3BqcGZvZ3ZTcHA4bGNReVd1NWNQ" + $("#id").val();
        var conn = peer.connect(id);
    
        // nhận dữ liệu
        conn.on('data', (data) => {
            var blob = new Blob([data.file]);
            var url  = URL.createObjectURL(blob);
            $("#taive").attr({ 'download': data.filename, 'href': url});   
            $("#taive").text(data.filename);
        });

    }

  

</script>

</html>